import{c as W,h as K,g as Y,e as Q,u as X}from"./links.96350b09.js";import{l as Z}from"./license.2c6d1a81.js";import{p as V,q as tt}from"./isArrayLikeObject.22a096cb.js";import{C as F,S as et}from"./index.0eabb636.js";import{B as ot,C as st}from"./Caret.164d8058.js";import{r as g,o as _,c as k,F as C,h as N,b as $,w as m,a as n,t as h,f as T,d as l,g as R,n as rt,K as P,O as L,i as A}from"./vue.runtime.esm-bundler.b39e1078.js";/* empty css                                            */import{_ as B}from"./_plugin-vue_export-helper.b97bdf23.js";/* empty css                                              */import"./default-i18n.3881921e.js";import"./constants.1758f66e.js";import{N as it}from"./Network.4e191d1c.js";import{S as nt,a as lt}from"./Ellipse.59d453c8.js";import{C as at}from"./Index.4ee78e0e.js";import{B as dt}from"./Editor.50ee6717.js";import{C as ct}from"./Card.74f1c881.js";import{C as ut,S as ht}from"./Upload.41baffb2.js";import{C as bt}from"./SettingsRow.1adac8e2.js";import{S as pt,D as mt}from"./Drag.9683a277.js";import{S as _t}from"./Plus.3a43a085.js";import{S as ft}from"./External.8186427a.js";import"./upperFirst.8df5cd57.js";import"./_stringToArray.4de3b1f3.js";import"./toString.0891eb3e.js";/* empty css                                              */import"./tags.afd5e332.js";import"./Tooltip.6979830f.js";import"./Slide.cdf6c622.js";import"./params.f0608262.js";import"./Row.5242dafa.js";import"./vue.runtime.esm-bundler.60c71097.js";const gt=t=>{const e=[];return Object.keys(t).forEach(r=>{r&&(e.push(`User-agent: ${r}`),Object.keys(t[r]).forEach(i=>{const[o,s]=t[r][i].split(":").map(b=>b.trim());e.push(`${o.charAt(0).toUpperCase()+o.slice(1)}: ${s}`)}),e.push(""))}),e.join(`\r
`)},E=t=>{const e={};return t.forEach(r=>{const i=JSON.parse(r);if(!(!i.userAgent||!i.fieldValue)){if(!e[i.userAgent]){e[i.userAgent]=[`${i.directive}: ${i.fieldValue}`];return}e[i.userAgent].push(`${i.directive}: ${i.fieldValue}`)}}),e},wt=t=>{const e=[],r=/^\/.*$/,i=(a,p,u,w,d={})=>{const x=`${w.tableIndex}${w.userAgent}${w.directive}${w.fieldValue}`;return a.find(f=>u==="defaultRuleOverride"&&f.hash===x&&f.message===u)||(a.push({type:p,message:u,hash:x,isNetworkIndex:d.isNetworkIndex,previewIndex:d.previewIndex,sourcePreviewIndex:(d==null?void 0:d.sourcePreviewIndex)||null,conflictingIndex:(d==null?void 0:d.conflictingIndex)||null,duplicateIndex:(d==null?void 0:d.duplicateIndex)||null,equivalentIndex:(d==null?void 0:d.equivalentIndex)||null,overriddenIndex:(d==null?void 0:d.overriddenIndex)||null}),e.push((d==null?void 0:d.overriddenIndex)||null)),a},o=(a,p)=>a+p;let s=[],b=0;for(const a in t){b=o(b,2);for(const[p,u]of Object.entries(t[a])){const[w,d]=[u.directive,u.fieldValue];if(!w||!d)continue;let x=b;for(let f=parseInt(p)+1;f<t[a].length;f++){const[y,I]=[t[a][f].directive,t[a][f].fieldValue];if(!(!y||!I)&&(b=o(b,1),`${w}${d}`==`${y}${I}`&&(s=i(s,"red","duplicateRule",t[a][f],{previewIndex:b,sourcePreviewIndex:x,isNetworkIndex:u.networkLevel,duplicateIndex:u.tableIndex})),w.match(/disallow|allow/i)&&y.match(/disallow|allow/i))){w!==y&&d===I&&(u.default?(e.includes(u.tableIndex)||x--,s=i(s,"yellow","defaultRuleOverride",t[a][f],{previewIndex:b,isNetworkIndex:u.networkLevel,overriddenIndex:u.tableIndex})):s=i(s,u.networkLevel?"yellow":"red","conflictingPath",t[a][f],{previewIndex:b,sourcePreviewIndex:u.networkLevel?null:x,isNetworkIndex:u.networkLevel,conflictingIndex:u.tableIndex}));const O=new RegExp(`^${I.replace(/\*+$/g,"")}$`);I.indexOf("*")!==-1&&d.match(O)&&(s=i(s,"red","equivalentPath",t[a][f],{previewIndex:b,sourcePreviewIndex:x,isNetworkIndex:u.networkLevel,equivalentIndex:u.tableIndex}))}}if(b=x,w.match(/^clean-param/i)){const[f,y]=d.split(/\s+/).map(I=>I.trim());(!f||f.match(r)||y&&!y.match(r))&&(s=i(s,"red","invalidCleanParam",u,{previewIndex:b}))}if(w.match(/^crawl-delay/i)){const f=Number(d);(isNaN(f)||0>f)&&(s=i(s,"red","invalidCrawlDelay",u,{previewIndex:b}))}b=o(b,1)}}if(s.length)throw s;return!0},Rt={components:{CoreAlert:F},computed:{errorsByType(){return this.errors.reduce((t,e)=>(t[e.type]||(t[e.type]=[]),t[e.type].push(e),t),{})}},methods:{getErrorMessage(t){return t.message==="duplicateRule"?this.$t.sprintf(this.$t.__("This rule is a duplicate of rule #%1$s%2$s.",this.$td),t.duplicateIndex,t.isNetworkIndex?` (${this.strings.fromTheNetwork})`:""):t.message==="equivalentPath"?this.$t.sprintf(this.$t.__("Equivalent to rule #%1$s%2$s. The trailing wildcard is ignored.",this.$td),t.equivalentIndex,t.isNetworkIndex?` (${this.strings.fromTheNetwork})`:""):t.message==="conflictingPath"?this.$t.sprintf(this.$t.__("This rule conflicts with rule #%1$s%2$s.%3$s",this.$td),t.conflictingIndex,t.isNetworkIndex?` (${this.strings.fromTheNetwork})`:"",t.isNetworkIndex?` ${this.strings.networkRuleTakesPrecedence}`:` ${this.strings.allowTakesPrecedence}`):t.message==="defaultRuleOverride"?this.$t.sprintf(this.$t.__("This rule overrides the default rule #%1$s%2$s.",this.$td),t.overriddenIndex,t.isNetworkIndex?` (${this.strings.fromTheNetwork})`:""):this.strings[t.message]}},props:{errors:{type:Array,required:!0}},data(){return{strings:{allowTakesPrecedence:this.$t.__('The "Allow" rule takes precedence.',this.$td),fromTheNetwork:this.$t.__("from the network level",this.$td),invalidCleanParam:this.$t.__("Clean-param must start with at least one param which is optionally followed by one path.",this.$td),invalidCrawlDelay:this.$t.__("Crawl-delay must be a number greater than 0.",this.$td),networkRuleTakesPrecedence:this.$t.__("The network rule takes precedence.",this.$td)}}}},xt={key:0,class:"robots-editor-rule-error-alert"};function vt(t,e,r,i,o,s){const b=g("core-alert");return r.errors.length?(_(),k("div",xt,[(_(!0),k(C,null,N(s.errorsByType,(a,p)=>(_(),$(b,{key:p+"-errors",type:p,size:"small"},{default:m(()=>[(_(!0),k(C,null,N(a,(u,w)=>(_(),k("div",{key:w},[n("b",null,h(s.getErrorMessage(u)),1)]))),128))]),_:2},1032,["type"]))),128))])):T("",!0)}const kt=B(Rt,[["render",vt]]);const Tt={setup(){return{licenseStore:W(),networkStore:K(),notificationsStore:Y(),optionsStore:Q(),rootStore:X()}},components:{SvgDrag:pt,BaseButton:ot,BaseEditor:dt,CoreAlert:F,CoreCard:ct,CoreLoader:st,CoreModal:at,CoreNetworkSiteSelector:ut,CoreSettingsRow:bt,Draggable:mt,RuleErrors:kt,SvgCirclePlus:_t,SvgEllipse:nt,SvgExternal:ft,SvgTrash:et,SvgUpload:ht},mixins:[it,lt],data(){var t;return{currentSite:{},defaultRules:((t=this.rootStore.aioseo.data.robots)==null?void 0:t.defaultRules)||{},directiveOptions:[{value:"allow",label:"Allow"},{value:"disallow",label:"Disallow"},{value:"clean-param",label:"Clean-param"},{value:"crawl-delay",label:"Crawl-delay"}],errors:{deleteRobotsTxt:null,importAndDeleteRobotsTxt:null,importRobotsTxt:null,importRobotsTxtFromUrl:null,pasteRobotsTxtText:null,tableRule:[]},forceRobotsDetectedAlert:!1,inputImportRobotsTxtFromUrl:"",inputPasteRobotsTxtText:"",license:Z,loading:{btnDeleteRobotsTxt:!1,btnImportAndDeleteRobotsTxt:!1,btnImportRobotsTxt:!1,cardOverlay:!1},showImportModal:!1,strings:{addRule:this.$t.__("Add Rule",this.$td),allow:this.$t.__("Allow",this.$td),customRobotsPreview:this.$t.__("Custom Robots.txt Preview",this.$td),deleteRule:this.$t.__("Delete Rule",this.$td),description:this.$t.sprintf(this.$t.__("The robots.txt editor in %1$s allows you to set up a robots.txt file for your site that will override the default robots.txt file that WordPress creates. By creating a robots.txt file with %2$s you have greater control over the instructions you give web crawlers about your site.",this.$td),"AIOSEO","AIOSEO"),description2:this.$t.sprintf(this.$t.__("Just like WordPress, %1$s generates a dynamic file so there is no static file to be found on your server.  The content of the robots.txt file is stored in your WordPress database.",this.$td),"All in One SEO"),directive:this.$t.__("Directive",this.$td),disallow:this.$t.__("Disallow",this.$td),enableCustomRobots:this.$t.__("Enable Custom Robots.txt",this.$td),importAndDelete:this.$t.__("Import and Delete",this.$td),importFromUrl:this.$t.__("Import from URL",this.$td),importRobots:this.$t.__("Import Robots.txt",this.$td),networkAlert:this.$t.__("These custom robots.txt rules will apply globally to your entire network. To adjust the robots.txt rules for an individual site, please choose it in the list above.",this.$td),networkAlertLite:this.$t.__("These custom robots.txt rules will apply globally to your entire network. To adjust the robots.txt rules for an individual site, please visit the dashboard for that site directly and update the settings there.",this.$td),invalidRobotsTxtUrl:this.$t.__("Invalid robots.txt URL.",this.$td),openRobotsTxt:this.$t.__("Open Robots.txt",this.$td),pasteRobotsText:this.$t.__("Paste Robots.txt text",this.$td),userAgentNotFound:this.$t.__("No User-agent found in the content beginning.",this.$td),pasteUrl:this.$t.__("https://any-domain.com/robots.txt",this.$td),physicalRobotsFound:this.$t.sprintf(this.$t.__("%1$s has detected a physical robots.txt file in the root folder of your WordPress installation. We recommend removing this file as it could cause conflicts with WordPress' dynamically generated one. %2$s can import this file and delete it, or you can simply delete it.",this.$td),"AIOSEO","AIOSEO"),robotsEditor:this.$t.__("Robots.txt Editor",this.$td),selectSite:this.$t.__("Select Site",this.$td),userAgent:this.$t.__("User Agent",this.$td)}}},watch:{"networkStore.networkRobots":{deep:!0,handler(){var t;((t=this.currentSite)==null?void 0:t.blog_id)==="network"?this.optionsStore.networkOptions.tools.robots.rules=this.networkStore.networkRobots.rules:this.optionsStore.options.tools.robots.rules=this.networkStore.networkRobots.rules,this.$nextTick(()=>{this.validateRules()})}},currentSite(t,e){e.blog_id&&this.processFetchSiteRobots()},"getOptions.enable"(){this.validateRules(),this.maybeForceRobotsDetectedAlert()}},computed:{btnImportRobotsTxtDisabled(){return!this.inputImportRobotsTxtFromUrl&&!this.inputPasteRobotsTxtText?!0:this.errors.importRobotsTxtFromUrl||this.errors.pasteRobotsTxtText},getOptions(){var t;return((t=this.currentSite)==null?void 0:t.blog_id)==="network"?this.networkStore.getNetworkRobots:this.optionsStore.options.tools.robots},inputCustomRobotsTxtPreview(){const t=this.isNetworkSite&&this.optionsStore.networkOptions.tools.robots.enable?E(this.networkStore.getNetworkRobots.rules):{},e=E(this.networkStore.networkRobots.rules),r=`\r
`+this.rootStore.aioseo.data.robots.sitemapUrls.filter(o=>0<o.length).join(`\r
`);let i=this.getOptions.enable?this.mergeRuleset(this.defaultRules,this.mergeRuleset(t,e),!0):this.mergeRuleset(this.defaultRules,t);return i=gt(i)+r,i.replace(/<[^>]*>/g,"")},isNetworkSite(){var t;return this.rootStore.aioseo.data.isMultisite&&((t=this.currentSite)==null?void 0:t.blog_id)!=="network"},isValidRobotsSite(){var e;return new URL(this.robotsTxtUrl).pathname.match(/^\/robots.txt\/?/)?this.rootStore.aioseo.data.subdomain||((e=this.currentSite)==null?void 0:e.blog_id)==="network"||this.isMainSite(this.currentSite.domain,this.currentSite.path)||!this.rootStore.aioseo.data.isNetworkAdmin&&this.rootStore.aioseo.data.mainSite:!1},missingRewriteRules(){const t=this.$t.__("It looks like you are missing the proper rewrite rules for the robots.txt file.",this.$td);let e="";return this.rootStore.aioseo.data.server.apache?e=this.$t.sprintf(this.$t.__("It appears that your server is running on Apache, so the fix should be as simple as checking the %1$scorrect .htaccess implementation on wordpress.org%2$s.",this.$td),'<a href="https://wordpress.org/support/article/htaccess/" target="_blank">',"</a>"):this.rootStore.aioseo.data.server.nginx&&(e=e=this.$t.sprintf(this.$t.__("It appears that your server is running on nginx, so the fix will most likely require adding the correct rewrite rules to our nginx configuration. %1$sCheck our documentation for more information%2$s.",this.$td),'<a href="'+this.$links.getDocUrl("robotsRewrite")+'" target="_blank">',"</a>")),t+" "+e},parsedCustomRules(){const t=[];for(const e of this.networkStore.networkRobots.rules.values()){const r=JSON.parse(e);t.push({userAgent:r.userAgent,directive:r.directive,fieldValue:r.fieldValue,default:!1,networkLevel:!1})}return t},parsedDefaultRules(){const t=[];return Object.keys(this.defaultRules).forEach(e=>{for(const r of this.defaultRules[e].values()){const[i,o]=r.split(":").map(s=>s.trim());t.push({userAgent:e,directive:i,fieldValue:o,default:!0,networkLevel:!1})}}),t},parsedNetworkRules(){const t=this.isNetworkSite&&this.optionsStore.networkOptions.tools.robots.enable?this.networkStore.getNetworkRobots.rules:{},e=[];if(Object.keys(t).length)for(const r of t.values()){const i=JSON.parse(r);e.push({userAgent:i.userAgent,directive:i.directive,fieldValue:i.fieldValue,default:!1,networkLevel:!0})}return e},robotsPreviewErrorLabel(){const t=this.errors.tableRule.length?this.errors.tableRule.filter(i=>i.type==="red"):[];if(!t.length)return"";const e=V(t,"previewIndex"),r=tt(e).length;return this.$t.sprintf(this.$t._n("%1$s Error","%1$s Errors",r,this.$td),r)},robotsTxtUrl(){var t,e;return((t=this.currentSite)==null?void 0:t.blog_id)!=="network"&&((e=this.currentSite)!=null&&e.domain)?`${this.rootStore.aioseo.data.isSsl?"https://":"http://"}${this.currentSite.domain}${this.currentSite.path}robots.txt`:this.rootStore.aioseo.urls.robotsTxtUrl},subdirectoryAlert(){return this.isNetworkSite?this.$t.sprintf(this.$t.__("This site is running in a sub-directory of your main site located at %1$s. Your robots.txt file should only appear in the root directory of that site.",this.$td),'<a href="'+this.rootStore.aioseo.urls.mainSiteUrl+'" target="_blank"><strong>'+this.rootStore.aioseo.urls.mainSiteUrl+"</strong></a>"):this.$t.__("This site runs in a sub-directory. The robots.txt file must be located at the root of the website host to which it applies.",this.$td)},showRobotsDetectedAlert(){return this.getOptions.robotsDetected||this.forceRobotsDetectedAlert},tableRules:{get(){return this.networkStore.networkRobots.rules.map(t=>JSON.parse(t))},set(t){const e=[];t.forEach(r=>{e.push(JSON.stringify({userAgent:r.userAgent,directive:r.directive,fieldValue:r.fieldValue}))}),this.networkStore.networkRobots.rules=e}}},methods:{addRow(){this.networkStore.networkRobots.rules.push(JSON.stringify({userAgent:null,directive:"allow",fieldValue:null})),this.$nextTick(()=>{document.querySelector(".robots-editor-table__body .robots-editor-table__row:last-child input").focus()})},deleteRow(t){this.networkStore.networkRobots.rules.splice(t,1)},getTableIndexedRuleset(){const t=[],e=[],r=[...this.parsedDefaultRules,...this.parsedNetworkRules,...this.parsedCustomRules];let i=this.parsedDefaultRules.length,o=0;return r.forEach(s=>{s.tableIndex=s.networkLevel?++i:++o,e.push(s)}),e.forEach(s=>{if(!t[s.userAgent]){t[s.userAgent]=[s];return}t[s.userAgent].push(s)}),t},getTableRuleErrors(t,e){return this.errors.tableRule.length?this.errors.tableRule.filter(r=>r.hash===`${t}${e.userAgent}${e.directive}${e.fieldValue}`):[]},hasTableRuleError(t,e){return this.errors.tableRule.length?this.errors.tableRule.find(r=>t===(r.duplicateIndex||r.equivalentIndex||r.conflictingIndex)||r.hash===`${t}${e.userAgent}${e.directive}${e.fieldValue}`):!1},hideRobotsDetected(){this.getOptions.robotsDetected=!1,this.optionsStore.saveChanges()},maybeForceRobotsDetectedAlert(){this.getOptions.enable||(this.forceRobotsDetectedAlert=!1),this.getOptions.enable&&this.rootStore.aioseo.data.robots.hasPhysicalRobots&&(this.forceRobotsDetectedAlert=!0)},mergeRuleset(t,e,r=!1){const i={...t};return Object.keys(e).forEach(o=>{if(!(o in i)){i[o]=e[o];return}for(const s of e[o].values()){const[b,a]=s.split(":").map(p=>p.trim());if(b.match(/disallow|allow/i)){const p=b==="disallow"?"allow":"disallow",u=i[o].indexOf(`${p}: ${a}`);u!==-1&&(r?i[o]=i[o].filter((w,d)=>d!==u):e[o]=e[o].filter(w=>w!==`${b}: ${a}`))}}i[o]=[...i[o],...e[o]]}),i},onChangeInputImportRobotsTxtFromUrl(t){this.inputImportRobotsTxtFromUrl=t,this.errors.importRobotsTxtFromUrl=null,t&&!t.match(/^https?:\/\/.{2,}\..{2,}\/robots\.txt$/)&&(this.errors.importRobotsTxtFromUrl=this.strings.invalidRobotsTxtUrl)},onChangeInputPasteRobotsTxtText(t){this.inputPasteRobotsTxtText=t.replace(/#[^\n\r]*/g,""),this.errors.pasteRobotsTxtText=null,this.inputPasteRobotsTxtText&&!this.inputPasteRobotsTxtText.match(/^\s*user-agent:\s*./gi)&&(this.errors.pasteRobotsTxtText=this.strings.userAgentNotFound)},onClickBtnDeleteRobotsTxt(){this.loading.btnDeleteRobotsTxt=!0,this.notificationsStore.processButtonAction("tools/delete-robots-txt").then(()=>window.location.reload()).catch(t=>{var e,r;this.loading.btnDeleteRobotsTxt=!1,this.errors.deleteRobotsTxt=((r=(e=t==null?void 0:t.response)==null?void 0:e.body)==null?void 0:r.message)||null})},onClickBtnImportAndDeleteRobotsTxt(){this.loading.btnImportAndDeleteRobotsTxt=!0,this.processImportRobotsTxt("static").then(()=>{window.location.reload()}).catch(t=>{var e,r;this.loading.btnImportAndDeleteRobotsTxt=!1,this.errors.importAndDeleteRobotsTxt=((r=(e=t==null?void 0:t.response)==null?void 0:e.body)==null?void 0:r.message)||null})},onClickBtnImportRobotsTxt(t){this.loading.btnImportRobotsTxt=!0,this.processImportRobotsTxt(t).then(()=>window.location.reload()).catch(e=>{var r,i;this.loading.btnImportRobotsTxt=!1,this.errors.importRobotsTxt=((i=(r=e==null?void 0:e.response)==null?void 0:r.body)==null?void 0:i.message)||null})},processFetchSiteRobots(){this.loading.cardOverlay=!0,this.networkStore.fetchSiteRobots(this.currentSite.blog_id).then(()=>this.loading.cardOverlay=!1)},processImportRobotsTxt(t){var e;return this.networkStore.importRobotsTxt({source:t,url:this.inputImportRobotsTxtFromUrl,text:this.inputPasteRobotsTxtText,networkLevel:this.rootStore.aioseo.data.isNetworkAdmin,blogId:((e=this.currentSite)==null?void 0:e.blog_id)||null})},sanitizeDirectiveValue(t,e,r){return r=decodeURIComponent(r.trim()),r&&(r=r.replace(/[><]/,""),e==="userAgent"&&(r=r.replace(/([^a-z0-9\-_*,.\s])/gi,""),r=r.replace(/\s+/g," ")),e==="fieldValue"&&t.directive.match(/allow|disallow/)&&(r=r.indexOf("*")===0&&1<r.length?r:"/"+r.replace(/(^\/+)/,"")),r)},async updateRule(t,e,r,i){this.networkStore.networkRobots.rules.splice(i,1,JSON.stringify(t)),await this.$nextTick(),t[e]=this.sanitizeDirectiveValue(t,e,r),this.networkStore.networkRobots.rules.splice(i,1,JSON.stringify(t))},validateRules(){if(!this.getOptions.enable)return this.errors.tableRule=[],!1;try{wt(this.getTableIndexedRuleset()),this.errors.tableRule=[]}catch(t){this.errors.tableRule=t,this.$nextTick(()=>{var a;const e=this.errors.tableRule.length?this.errors.tableRule.filter(p=>p.type==="red"):[],r=((a=this.$refs["input-custom-robots-txt-preview"])==null?void 0:a.$el.querySelector(".ql-editor"))||null;if(!r)return!1;const i=r.querySelectorAll("p"),o=V(e,"previewIndex"),s=V(e,"sourcePreviewIndex"),b=[...new Set([...o,...s])];for(const p of b)i[p-1]&&i[p-1].classList.add("has-error")})}}},mounted(){var t;this.networkStore.networkRobots.rules=((t=this.currentSite)==null?void 0:t.blog_id)==="network"?this.networkStore.getNetworkRobots.rules:this.optionsStore.options.tools.robots.rules,this.validateRules(),this.maybeForceRobotsDetectedAlert()}},St={class:"aioseo-tools-robots-editor"},yt={key:0,class:"aioseo-settings-row"},It={class:"settings-name"},$t={class:"name small-margin"},At={class:"settings-content"},Ct={class:"aioseo-settings-row"},Ot={class:"description"},Vt={class:"description"},Nt=["innerHTML"],Dt={key:1,class:"aioseo-settings-row"},Ut={class:"description"},Pt={class:"buttons description"},Lt={key:2,class:"aioseo-settings-row"},Et={class:"aioseo-settings-row"},Ft={class:"settings-content"},Bt={class:"robots-editor-table"},zt={class:"robots-editor-table__header"},Mt={class:"robots-editor-table__row"},qt=n("div",{class:"robots-editor-table__column"},"#",-1),Gt={class:"robots-editor-table__column"},jt={class:"robots-editor-table__column"},Jt={class:"robots-editor-table__column"},Ht=n("div",{class:"robots-editor-table__column"},null,-1),Wt={class:"robots-editor-table__body"},Kt={class:"robots-editor-table__column"},Yt={class:"robots-editor-table__column"},Qt={class:"robots-editor-table__column"},Xt={class:"robots-editor-table__column"},Zt=n("div",{class:"robots-editor-table__column"},null,-1),te={class:"robots-editor-table__column robots-editor-table__column--truncate"},ee={class:"robots-editor-table__column"},oe={class:"robots-editor-table__column"},se={class:"robots-editor-table__column"},re={class:"robots-editor-table__column robots-editor-table__column--actions"},ie=["onClick","title"],ne={class:"robots-editor-table__footer"},le={class:"buttons"},ae={class:"aioseo-settings-row aioseo-settings-row--preview-robots no-margin"},de={class:"settings-name"},ce={class:"name"},ue={key:0,class:"aioseo-error"},he={class:"settings-content"},be={key:0,class:"aioseo-settings-row no-margin no-border"},pe=["data-or"],me={class:"settings-name"},_e={class:"name small-margin"},fe={class:"settings-content settings-content--gap"},ge={class:"aioseo-settings-row"},we={class:"settings-name"},Re={class:"name small-margin"},xe={class:"settings-content settings-content--gap"},ve={class:"buttons"},ke={key:6,class:"loader-overlay"};function Te(t,e,r,i,o,s){const b=g("core-network-site-selector"),a=g("core-alert"),p=g("base-button"),u=g("svg-external"),w=g("core-settings-row"),d=g("base-toggle"),x=g("base-input"),f=g("base-select"),y=g("svg-trash"),I=g("svg-drag"),O=g("rule-errors"),z=g("draggable"),M=g("svg-circle-plus"),q=g("svg-upload"),G=g("svg-ellipse"),D=g("base-editor"),j=g("core-modal"),J=g("core-loader"),H=g("core-card");return _(),k("div",St,[l(H,{slug:"robotsEditor","header-text":o.strings.robotsEditor},{default:m(()=>{var U;return[i.rootStore.aioseo.data.isNetworkAdmin&&!i.licenseStore.isUnlicensed&&o.license.hasCoreFeature("tools","network-tools-robots")?(_(),k("div",yt,[n("div",It,[n("div",$t,h(o.strings.selectSite),1)]),n("div",At,[l(b,{onSelectedSite:e[0]||(e[0]=c=>o.currentSite=c),"follow-selected-site":"","show-network":""})])])):T("",!0),n("div",Ct,[((U=this.currentSite)==null?void 0:U.blog_id)==="network"?(_(),$(a,{key:0},{default:m(()=>[R(h(i.licenseStore.isUnlicensed||!o.license.hasCoreFeature("tools","network-tools-robots")?o.strings.networkAlertLite:o.strings.networkAlert),1)]),_:1})):T("",!0),n("p",Ot,h(o.strings.description),1),n("p",Vt,[R(h(o.strings.description2)+" ",1),n("span",{innerHTML:t.$links.getDocLink(t.$constants.GLOBAL_STRINGS.learnMore,"robotsEditor",!0)},null,8,Nt)])]),i.rootStore.aioseo.data.robots.hasPhysicalRobots&&s.showRobotsDetectedAlert?(_(),k("div",Dt,[o.errors.importAndDeleteRobotsTxt||o.errors.deleteRobotsTxt?(_(),$(a,{key:0,type:"red"},{default:m(()=>[R(h(o.errors.importAndDeleteRobotsTxt||o.errors.deleteRobotsTxt),1)]),_:1})):T("",!0),l(a,{type:"red","show-close":!s.getOptions.enable,onCloseAlert:s.hideRobotsDetected},{default:m(()=>[n("p",Ut,h(o.strings.physicalRobotsFound),1),n("p",Pt,[l(p,{type:"blue",size:"medium",onClick:s.onClickBtnImportAndDeleteRobotsTxt,loading:o.loading.btnImportAndDeleteRobotsTxt},{default:m(()=>[R(h(o.strings.importAndDelete),1)]),_:1},8,["onClick","loading"]),l(p,{type:"blue",size:"medium",onClick:s.onClickBtnDeleteRobotsTxt,loading:o.loading.btnDeleteRobotsTxt},{default:m(()=>[R(h(t.$constants.GLOBAL_STRINGS.delete),1)]),_:1},8,["onClick","loading"])])]),_:1},8,["show-close","onCloseAlert"])])):T("",!0),i.rootStore.aioseo.data.robots.rewriteExists?T("",!0):(_(),k("div",Lt,[l(a,{type:"red",innerHTML:s.missingRewriteRules},null,8,["innerHTML"])])),s.isValidRobotsSite?(_(),k(C,{key:3},[l(w,{name:t.$constants.GLOBAL_STRINGS.preview},{content:m(()=>[l(p,{size:"medium",type:"blue",tag:"a",href:s.robotsTxtUrl,target:"_blank"},{default:m(()=>[l(u,{width:"14"}),R(" "+h(o.strings.openRobotsTxt),1)]),_:1},8,["href"])]),_:1},8,["name"]),l(w,{name:o.strings.enableCustomRobots,class:"no-border no-margin"},{content:m(()=>[l(d,{modelValue:s.getOptions.enable,"onUpdate:modelValue":e[1]||(e[1]=c=>s.getOptions.enable=c)},null,8,["modelValue"])]),_:1},8,["name"]),n("div",Et,[n("div",Ft,[n("div",Bt,[n("div",zt,[n("div",Mt,[qt,n("div",Gt,h(o.strings.userAgent),1),n("div",jt,h(o.strings.directive),1),n("div",Jt,h(t.$constants.GLOBAL_STRINGS.value),1),Ht])]),n("div",Wt,[(_(!0),k(C,null,N(s.parsedDefaultRules,(c,S)=>(_(),k("div",{key:S,class:"robots-editor-table__row robots-editor-table__row--stripe"},[n("div",Kt,h(S+1),1),n("div",Yt,[l(x,{modelValue:c.userAgent,disabled:!0,size:"medium"},null,8,["modelValue"])]),n("div",Qt,[l(f,{modelValue:o.directiveOptions.find(v=>v.value===c.directive),options:[],disabled:!0,size:"medium"},null,8,["modelValue"])]),n("div",Xt,[l(x,{modelValue:c.fieldValue,disabled:!0,size:"medium"},null,8,["modelValue"])]),Zt]))),128)),l(z,{handle:".aioseo-drag-wrapper",modelValue:s.tableRules,"onUpdate:modelValue":e[3]||(e[3]=c=>s.tableRules=c),"item-key":t._uid.toString(),class:"draggable-rules"},{item:m(({element:c,index:S})=>[n("div",{class:rt(["robots-editor-table__row robots-editor-table__row--stripe",{"aioseo-error":s.hasTableRuleError(S+s.parsedDefaultRules.length+1,c)}])},[n("div",te,h(S+s.parsedDefaultRules.length+1),1),n("div",ee,[l(x,{modelValue:c.userAgent,"onUpdate:modelValue":v=>c.userAgent=v,spellcheck:!1,disabled:!s.getOptions.enable,onChange:v=>s.updateRule(c,"userAgent",v,S),size:"medium"},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),n("div",oe,[l(f,{modelValue:o.directiveOptions.find(v=>v.value===c.directive),options:o.directiveOptions,disabled:!s.getOptions.enable,"onUpdate:modelValue":v=>s.updateRule(c,"directive",v.value,S),size:"medium"},null,8,["modelValue","options","disabled","onUpdate:modelValue"])]),n("div",se,[l(x,{modelValue:c.fieldValue,"onUpdate:modelValue":v=>c.fieldValue=v,spellcheck:!1,disabled:!s.getOptions.enable,onChange:v=>s.updateRule(c,"fieldValue",v,S),size:"medium"},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),n("div",re,[P(n("a",{onClick:A(v=>s.deleteRow(S),["prevent"]),href:"#",role:"button",class:"btn-delete-rule aioseo-outline",title:o.strings.deleteRule},[l(y,{width:"20"})],8,ie),[[L,s.getOptions.enable]]),P(n("a",{onClick:e[2]||(e[2]=A(()=>{},["prevent"])),href:"#",role:"button",class:"aioseo-drag-wrapper aioseo-outline"},[l(I,{width:"20"})],512),[[L,s.getOptions.enable]])]),l(O,{errors:s.getTableRuleErrors(S+s.parsedDefaultRules.length+1,c),class:"robots-editor-table__column robots-editor-table__column--rule-error"},null,8,["errors"])],2)]),_:1},8,["modelValue","item-key"])]),n("div",ne,[n("div",le,[l(p,{onClick:A(s.addRow,["exact"]),disabled:!s.getOptions.enable,class:"btn-add-rule",type:"black",size:"small"},{default:m(()=>[l(M,{width:"14"}),R(" "+h(o.strings.addRule),1)]),_:1},8,["onClick","disabled"]),l(p,{onClick:e[4]||(e[4]=A(c=>o.showImportModal=!0,["prevent"])),disabled:!s.getOptions.enable,type:"black",size:"small"},{default:m(()=>[l(q,{width:"14"}),R(" "+h(t.$constants.GLOBAL_STRINGS.import),1)]),_:1},8,["disabled"])])])])])]),n("div",ae,[n("div",de,[n("div",ce,[R(h(o.strings.customRobotsPreview)+" ",1),s.robotsPreviewErrorLabel?(_(),k("div",ue,[l(G,{width:"8"}),n("span",null,h(s.robotsPreviewErrorLabel),1)])):T("",!0)])]),n("div",he,[l(D,{modelValue:s.inputCustomRobotsTxtPreview,"line-numbers":!0,disabled:"","force-updates":"",monospace:"",ref:"input-custom-robots-txt-preview"},null,8,["modelValue"])])])],64)):(_(),$(a,{key:4,innerHTML:s.subdirectoryAlert},null,8,["innerHTML"])),o.showImportModal?(_(),$(j,{key:5,onClose:e[10]||(e[10]=c=>o.showImportModal=!1)},{headerTitle:m(()=>[R(h(o.strings.importRobots),1)]),body:m(()=>[o.errors.importRobotsTxt?(_(),k("div",be,[l(a,{type:"red","show-close":"",onCloseAlert:e[5]||(e[5]=c=>o.errors.importRobotsTxt=null)},{default:m(()=>[R(h(o.errors.importRobotsTxt),1)]),_:1})])):T("",!0),n("div",{class:"aioseo-settings-row aioseo-settings-row--or","data-or":t.$constants.GLOBAL_STRINGS.or},[n("div",me,[n("div",_e,h(o.strings.importFromUrl),1)]),n("div",fe,[l(x,{modelValue:o.inputImportRobotsTxtFromUrl,"onUpdate:modelValue":e[6]||(e[6]=c=>s.onChangeInputImportRobotsTxtFromUrl(c)),placeholder:o.strings.pasteUrl,disabled:!!o.inputPasteRobotsTxtText,type:"url",size:"medium"},null,8,["modelValue","placeholder","disabled"]),o.errors.importRobotsTxtFromUrl?(_(),$(a,{key:0,type:"red",size:"small"},{default:m(()=>[R(h(o.errors.importRobotsTxtFromUrl),1)]),_:1})):T("",!0)])],8,pe),n("div",ge,[n("div",we,[n("div",Re,h(o.strings.pasteRobotsText),1)]),n("div",xe,[l(D,{modelValue:o.inputPasteRobotsTxtText,"onUpdate:modelValue":e[7]||(e[7]=c=>s.onChangeInputPasteRobotsTxtText(c)),"line-numbers":!0,"minimum-line-numbers":10,disabled:!!o.inputImportRobotsTxtFromUrl,spellcheck:!1,monospace:""},null,8,["modelValue","disabled"]),o.errors.pasteRobotsTxtText?(_(),$(a,{key:0,type:"red",size:"small"},{default:m(()=>[R(h(o.errors.pasteRobotsTxtText),1)]),_:1})):T("",!0)])])]),footer:m(()=>[n("div",ve,[l(p,{onClick:e[8]||(e[8]=A(c=>o.showImportModal=!1,["exact"])),type:"gray",size:"medium"},{default:m(()=>[R(h(t.$constants.GLOBAL_STRINGS.cancel),1)]),_:1}),l(p,{onClick:e[9]||(e[9]=A(c=>s.onClickBtnImportRobotsTxt(o.inputImportRobotsTxtFromUrl?"url":"text"),["exact"])),loading:o.loading.btnImportRobotsTxt,disabled:!!s.btnImportRobotsTxtDisabled,type:"blue",size:"medium"},{default:m(()=>[R(h(t.$constants.GLOBAL_STRINGS.import),1)]),_:1},8,["loading","disabled"])])]),_:1})):T("",!0),o.loading.cardOverlay?(_(),k("div",ke,[l(J)])):T("",!0)]}),_:1},8,["header-text"])])}const oo=B(Tt,[["render",Te]]);export{oo as default};
